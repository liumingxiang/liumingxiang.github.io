<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 前端知识点：原生篇(3) · 刘擎</title><meta name="description" content="前端知识点：原生篇(3) - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="刘擎"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">文章列表</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">前端知识点：原生篇(3)</h1><div class="post-info">Apr 10, 2015</div><div class="post-content"><h2 id="1-返回值问题-return"><a href="#1-返回值问题-return" class="headerlink" title="1. 返回值问题(return)"></a>1. 返回值问题(return)</h2><ol>
<li>return语句后面的代码不执行</li>
<li><strong>函数若没有写return，则默认返回undefined</strong></li>
<li><strong>函数返回语句为return; 也返回undefined</strong></li>
<li><strong>return必须写在函数function内</strong></li>
</ol>
<h2 id="2-undefined出现的情况"><a href="#2-undefined出现的情况" class="headerlink" title="2. undefined出现的情况"></a>2. undefined出现的情况</h2><ol>
<li>函数没有返回值或只有return;</li>
<li>定义了一个变量，但没有赋值</li>
</ol>
<blockquote>
<p>eg: var a; // undefined<br>​     function show(a) {}<br>​     show();    // undefined</p>
</blockquote>
<ol>
<li>访问不存在的属性</li>
</ol>
<blockquote>
<p>eg: oDiv.aaa;    // undefined</p>
</blockquote>
<h2 id="3-eval-字符串"><a href="#3-eval-字符串" class="headerlink" title="3. eval(字符串)"></a>3. eval(字符串)</h2><blockquote>
<p>虽然这个不建议使用，但还是聊聊这个东西是怎么用的吧</p>
</blockquote>
<p>eval能把字符串里面的代码转换成js能理解的程序，把引号中的拿出来运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    var a = &apos;[1, 2, 3]&apos;;    //字符串</div><div class="line">    alert(eval(a));        // 1, 2, 3  &apos;[1, 2, 3]&apos; -&gt; [1, 2, 3]&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="4-数字小于10的补零函数"><a href="#4-数字小于10的补零函数" class="headerlink" title="4. 数字小于10的补零函数"></a>4. 数字小于10的补零函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    function toTen(num) &#123;        if(num &lt; 10) &#123;            return &apos;0&apos; + num;</div><div class="line">        &#125; else &#123;            return &apos;&apos; + num;    // 函数的返回类型最好保持一致</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>简化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    function toTen(num) &#123;        return num &lt; 10 ? &apos;0&apos; + num : &apos;&apos; + num;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="5-定时器"><a href="#5-定时器" class="headerlink" title="5. 定时器"></a>5. 定时器</h2><ol>
<li>Interval(每过一段时间执行一次，循环执行)</li>
</ol>
<ul>
<li>开启定时器<br>setInterval(函数/函数名, 时间);</li>
</ul>
<blockquote>
<p>时间单位是毫秒</p>
</blockquote>
<ul>
<li>关闭定时器<br>clearInterval(定时器的名字);</li>
</ul>
<ol>
<li>Timeout(过一段时间执行一次，只执行一次)</li>
</ol>
<ul>
<li>开启定时器<br>setTimeout(函数/函数名, 时间);</li>
</ul>
<blockquote>
<p>时间单位是毫秒</p>
</blockquote>
<ul>
<li>关闭定时器<br>clearTimeout(定时器的名字);</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;        // 定时器先关后开</div><div class="line">    var bSin = false;        var timer = setInterval(function() &#123;            if(bSin) &#123;                return;</div><div class="line">        &#125;</div><div class="line">        bSin = true;</div><div class="line">    &#125;, 30);        function clear() &#123;</div><div class="line">        clearInterval(timer);</div><div class="line">        bSin = false;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="6-日期对象"><a href="#6-日期对象" class="headerlink" title="6. 日期对象"></a>6. 日期对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    // 获取时间</div><div class="line">    var oDate = new Date();</div><div class="line">    oDate.getFullYear();    // 获取年</div><div class="line">    oDate.getMonth();        // 获取月，从0开始，获取+1，设置-1 !important</div><div class="line">    oDate.getDate();        // 获取日</div><div class="line">    oDate.getDay();            // 获取星期，星期天 -&gt; 0，星期一 ~ 星期六 -&gt; 1 ~ 6</div><div class="line"></div><div class="line">    oDate.getHours();        // 获取小时，记得加s，下同 !important</div><div class="line">    oDate.getMinutes();        // 获取分钟</div><div class="line">    oDate.getSeconds();        // 获取秒</div><div class="line">    oDate.getMillseconds();    // 获取毫秒</div><div class="line">    oDate.getTime();         // 时间戳 当前时间距离1970/1/1凌晨的毫秒数&lt;/script&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    // 设置时间</div><div class="line">    var oDate = new Date();</div><div class="line">    oDate.setFulllYear(2017, 11, 13);    // 设置年、月、日  月份设置时-1</div><div class="line">    oDate.setHours(0, 0, 0, 0);            // 设置时、分、秒、毫秒</div><div class="line"></div><div class="line">    // 获得时间戳</div><div class="line">    oDate.getTime();    // 设置后的时间距离1970/1/1凌晨的毫秒数&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="7-日期对象应用"><a href="#7-日期对象应用" class="headerlink" title="7. 日期对象应用"></a>7. 日期对象应用</h2><blockquote>
<p>oDate.setDate(31); // 假设本月有30天会跑到下个月的第一天 会自动进位<br>oDate.setDate(0); // 会跑到上个月的最后一天</p>
</blockquote>
<h3 id="本月有多少天"><a href="#本月有多少天" class="headerlink" title="本月有多少天"></a>本月有多少天</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    var oDate = new Date();</div><div class="line">    oDate.setMonth(oDate.getMonth() + 1); // 当前月份+1</div><div class="line">    oDate.setDate(0);    // setDate(0);</div><div class="line">    alert(oDate.getDate());&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="本月第一天是周几"><a href="#本月第一天是周几" class="headerlink" title="本月第一天是周几"></a>本月第一天是周几</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    var oDate = new Date();</div><div class="line">    oDate.setDate(1);    // setDate(1);</div><div class="line">    alert(oDate.getDay());&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="本月最后一天是周几"><a href="#本月最后一天是周几" class="headerlink" title="本月最后一天是周几"></a>本月最后一天是周几</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    var oDate = new Date();</div><div class="line">    oDate.setMonth(oDate.getMonth()+1);    // 当前月份+1</div><div class="line">    oDate.setDate(0);    // setDate(0);</div><div class="line">    alert(oDate.getDay());&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="8-事件函数相同可以合并"><a href="#8-事件函数相同可以合并" class="headerlink" title="8. 事件函数相同可以合并"></a>8. 事件函数相同可以合并</h2><p>eg: oDiv1.onmouseout = oDiv2.onmouseout = function() {};</p>
<h2 id="9-this"><a href="#9-this" class="headerlink" title="9. this"></a>9. this</h2><p>this: 当前方法属于谁，this就是谁<br><strong>this默认属于window</strong></p>
<p>定时器里的this不能直接使用，原因：this指向了window</p>
<p>1.定时器中的this不指向元素，指向window<br>解决：在定时器外保存this<br>oBtn.onclick = function() {<br>   var _this = this;<br>   setTimeout(function(){<br>​       _this.style.background = ‘#f00’;<br>   },1000);<br>}<br>2.调用封装函数使用this，this不指向元素，指向window<br>3.(低级浏览器attachEvent)事件绑定里面的this 报错</p>
<h2 id="10-闭包"><a href="#10-闭包" class="headerlink" title="10. 闭包"></a>10. 闭包</h2><p>用处：</p>
<ol>
<li>解决变量名冲突</li>
<li>解决循环添加事件，事件中的循环变量不能用的问题</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    function clickEg() &#123;        //获取一组按钮    ps:js一组元素不能一起改变样式或设置事件</div><div class="line">        var aBtn = document.getElementsByTagName(&apos;button&apos;);        for(var i = 0; i &lt; 3; i++) &#123;</div><div class="line">            aBtn[i].onclick = function() &#123;                //循环中的i变量此时已自增至3</div><div class="line">                //aBtn[i].style.background = &apos;#f00&apos;;</div><div class="line"></div><div class="line">                //当前事件发生的对象 aBtn[i]为this</div><div class="line">                this.style.background = &apos;f00&apos;;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>闭包写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    function clickEg() &#123;        //获取一组按钮    ps:js一组元素不能一起改变样式或设置事件</div><div class="line">        var aBtn = document.getElementsByTagName(&apos;button&apos;);        for(var i = 0; i &lt; 3; i++) &#123;</div><div class="line">            (function(index) &#123;</div><div class="line">                aBtn[i].onclick = function() &#123;</div><div class="line">                    aBtn[index].style.background = &apos;f00&apos;;</div><div class="line">                &#125;</div><div class="line">            &#125;)(i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    for(var i=0; i&lt;2; i++) &#123;</div><div class="line">        setTimeout(function()&#123;</div><div class="line">            alert(i);</div><div class="line">        &#125;, 2000);</div><div class="line">    &#125;    // 结果：两秒后alert两次2，两秒后i已为2，然后执行两次循环&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>闭包写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;    for(var i=0; i&lt;2; i++) &#123;</div><div class="line">        (function(a)&#123;</div><div class="line">            setTimeout(function()&#123;</div><div class="line">                alert(a);</div><div class="line">            &#125;,2000);</div><div class="line">        &#125;)(i);</div><div class="line">    &#125;    // 结果：两秒后alert 0、1&lt;/script&gt;</div></pre></td></tr></table></figure></div></article></div></main><footer><div class="paginator"><a href="/2015/04/11/前端知识点/前端知识点：原生篇(4)/" class="prev">上一篇</a><a href="/2015/04/07/前端知识点/前端知识点：原生篇(2)/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2017 刘擎.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>